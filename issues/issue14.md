# issue14: 外部同期と認証（Google Drive / Google OAuth）の設計と段階的導入

## 目的
現行方針を「ローカル優先（Expo-SQLite）」に切り替えたため、外部同期（Google Drive）やGoogle認証に関する要件を一箇所に集約して再設計・段階的導入する。

## 範囲
- Google Drive を用いた同期設計（ファイル形式、競合解決、バックアップ）
- Google OAuth を用いた認証フロー要件（アクセストークン管理、スコープ、リフレッシュ）
- 同期オプションの設定UI（オンデマンド/自動/無効）
- ローカル ↔ 外部同期の移行マイグレーション設計
- セキュリティ要件（トークン保護、通信暗号化、最小権限）

## フェーズ提案
- フェーズ1: 調査と仕様化（実装は行わない）
  - API制限・コスト・UX影響の調査
  - 競合解決戦略の検討（タイムスタンプ/バージョン/マージルール）
  - 主要なユースケースの定義（単一デバイス・複数デバイス・オフライン）
- フェーズ2: オプショナル同期（読み取り専用/エクスポート基準）
  - ユーザーが明示的に有効化する同期トグルを実装
  - 初期はエクスポート/インポート、読み取り専用の同期から開始
- フェーズ3: フル同期（双方向）
  - 競合解決、差分同期、バックグアップなどを実装

## 非機能要件
- リトライ/指数バックオフ（429/5xx）
- トークンの安全な保管（OSのKeychain/Keystore利用）
- 同期の監査ログとユーザー向け復旧UI

## 完了条件
- 同期/認証に関する詳細仕様書（docs/）が作成され、レビュー済みであること
- フェーズ2以降の実装計画と優先度が明確化されていること

## 備考
- 当面はローカルのみで運用する方針に合意して進める。外部同期は必須項目ではなく、将来的なオプション機能として扱う。
