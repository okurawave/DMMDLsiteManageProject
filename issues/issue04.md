# issue04: 管理モード切り替え機能 ✅

## 並列で進めてよい関連Issue
- issue01（理念・概要）
- issue03（認証・初期設定）
- issue05（作品CRUD）
- issue08（インポート/エクスポート）
- issue10（ブラウザ拡張）
- issue13（開発・運用方針）

## 現状（実装状況）
- `Settings.tsx` には設定画面の基本UIのみ実装済みだが、モード切り替えスイッチは未追加。
- Zustand等でのモード状態管理やマイグレーションロジックは実装されていない。

## 要件
- 設定画面から「シンプルモード」「詳細モード」をユーザーがいつでも切り替え可能。
- **シンプルモード**: タイトル・作者名・タグ等の基本情報をテキストベースで手軽に管理。入力補助（サジェスト）あり。
- **詳細モード**: 作者・サークルを個別データとして管理し、名寄せ（同一人物のペンネーム統合）や階層管理（サークル-作者紐付け）が可能。
- モード移行時、既存の作品データから「作者名簿」「サークル名簿」等の初期データを自動生成し、ユーザーに移行内容を確認・通知。
- モード切替時はデータ損失や重複が発生しないよう、マイグレーションロジックを実装。

## チェックリスト
- [x] Zustandストア (`store/modeStore.ts`) を作成し、`mode`（simple/detail）と切替関数を実装
- [x] 設定画面 (`screens/Settings.tsx`) にラジオボタンまたはスイッチを追加し、モード切替UIを実装
- [x] モード状態を`AsyncStorage`に永続化し、アプリ起動時に復元
- [x] 初回詳細モード切替時のマイグレーションロジック（既存データから作者・サークル初期データ生成）を`migration/modeMigration.ts`で実装
- [x] テストケース（単体/統合）を追加し、切替動作とマイグレーションを検証

## 完了条件
- ユーザーが設定画面でシンプル⇔詳細モードを切替可能で、即時アプリ全体に反映される
- 切替時のデータマイグレーションが正しく動作する
- 上記機能は単体テストと統合テストで検証済み
