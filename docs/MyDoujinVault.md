アプリケーション「My Doujin Vault」要件定義書
Ver. 2.0 (Final)
作成日: 2025年8月12日
1. プロジェクトの理念と概要
1.1. プロジェクト名
My Doujin Vault （マイ・ドウジン・ヴォールト）
1.2. プロジェクトビジョン
「あなたのコレクションを、あなたの手に取り戻す。」
複数のプラットフォームに散在するデジタル同人コンテンツの書誌情報を、ユーザー自身の管理下に一元化する。これにより、重複購入の防止や過去作品の探索といった具体的な問題を解決するだけでなく、ユーザーが自身のコレクションを真に所有し、自由に探索し、愛でるための「デジタル時代の書斎」を提供する。
1.3. 基本思想
本プロジェクトは、以下の3つの思想を核とする。
ユーザーによるデータの完全所有: ユーザーデータは特定の企業のサーバーに預けるのではなく、ユーザー自身のクラウドストレージ（Google Drive）内で完結させる。ユーザーはいつでも自身のデータを、制約なく、普遍的な形式で持ち出す権利を持つ。
オープンソースによる協調開発: ソースコードは公開し、開発の透明性を確保する。世界中の開発者やユーザーからのあらゆる形の貢献（機能追加、デザイン改善、バグ報告、翻訳など）を歓迎し、コミュニティと共にアプリケーションを育てていく。
寄付による持続可能な運営: アプリケーションは全ての機能を無料で提供する。サーバー維持費のためではなく、開発者の開発時間を確保し、OSのアップデートや外部APIの変更に継続的に対応するための運営資金として、プロジェクトの思想に共感するユーザーからの寄付を募る。
1.4. プロジェクトスコープ
【スコープ内（開発対象）】
iOS/Androidで動作するネイティブアプリケーション。
主要なWebブラウザで動作するWebアプリケーション。
ユーザーのGoogleアカウントを利用した認証と、データ同期機能。
作品情報の登録・編集・閲覧・削除機能（シンプルモード/詳細モード）。
コレクションを多角的に探索するための、高度な管理・検索・統計機能。
データのインポート/エクスポート機能。
PCブラウザから作品情報を登録するためのブラウザ拡張機能。
【スコープ外（開発しない）】
作品ファイル自体のダウンロード、管理、閲覧機能。
プラットフォームとの決済連携、およびアフィリエイト機能。
独自のバックエンドサーバーの構築・運用。
ユーザー間でのコミュニケーション機能。
2. システム構成
2.1. アーキテクチャ概要
本システムは、クライアントアプリケーションとユーザー自身のGoogle Driveアカウントで構成される、完全なサーバーレスアーキテクチャを採用する。
クライアント: React Native + Expo を採用し、単一のコードベースからiOS, Android, Webアプリケーションをビルドする。
データ同期モデル: アプリはGoogle Drive APIを介して、ユーザーのGoogle Drive内に専用のデータファイル（例: database.json）を作成・同期する。
ローカルデータベース: 各デバイスは、Google Driveから同期したデータをローカルのデータベース（Expo-SQLite）に保存する。検索・表示などの主要な操作は、この高速なローカルDBに対して行い、オフラインでも快適なパフォーマンスを実現する。
2.2. 技術スタック
フロントエンド/アプリ: React Native, Expo, TypeScript
データ同期: Google Drive API
ローカルデータベース: Expo-SQLite
認証: Google OAuth (expo-auth-session等を利用)
ブラウザ拡張機能: HTML, CSS, JavaScript (TypeScript)
3. 機能要件
3.1. ユーザー認証と初期設定
3.1.1. 認証: GoogleアカウントによるOAuth認証のみをサポートする。
3.1.2. セットアップウィザード: 初回起動時に、対話形式のチュートリアルを表示する。「Google Drive連携で複数デバイスのデータが自動同期される」という利便性を伝えながら、ユーザーを導き、認証とGoogle Driveへの権限設定を完了させる。
3.2. 管理モード切り替え機能
ユーザーは設定画面から、いつでも2つの管理モードを切り替えられる。
3.2.1. シンプルモード (デフォルト): 作品の基本情報（タイトル、作者名、タグ等）をテキストベースで手軽に管理したいユーザー向け。
3.2.2. 詳細モード (オプトイン): サークルや作者を個別のデータとして管理し、名寄せや階層化を行いたいヘビーユーザー向け。
3.2.3. モード移行サポート: シンプルモードから詳細モードへ初めて切り替えた際、既存のテキストデータから「作者名簿」等の初期データを自動生成する移行サポート機能を提供する。
3.3. 作品管理（CRUD）機能
3.3.1. 作品登録: 手動入力フォームから作品情報を登録できる。
入力補助: 作者名、サークル名、タグの入力時には、過去の入力履歴に基づくサジェスト機能を提供する。
一覧からの選択: （詳細モード時）登録済みの作者、サークル、タグの一覧から選択して入力可能とし、表記揺れを防ぐ。
3.3.2. 作品閲覧: 登録した作品をリスト形式またはグリッド形式で表示する。
3.3.3. 作品更新・削除: 登録済みの情報を編集・削除できる。削除時には必ず確認ダイアログを表示する。
3.4. コレクション探索機能
3.4.1. ナビゲーション: アプリの主要ナビゲーションとして「ライブラリ（作品一覧）」「作者一覧」「タグ一覧」のタブを設け、多角的な探索を可能にする。
3.4.2. 基本機能: キーワード検索、購入日や評価でのソート、プラットフォームやステータスでのフィルタリング機能を提供する。
3.4.3. 作者ページ: 作者名をタップすると、その作者の作品一覧、関連サークル、統計情報などをまとめた専用ページに遷移する。
3.4.4. タグページ: タグをタップすると、そのタグが付与された作品だけを一覧表示する専用ページに遷移する。
3.4.5. シリーズ管理: 複数の作品を「シリーズ」としてグルーピングし、順番や読了状況を管理できる。
3.5. 高度な管理機能（詳細モード時）
3.5.1. 作者管理: 「作者名簿」を編集する専用画面を提供する。同一人物の異なるペンネームを紐付ける「名寄せ」機能を備える。
3.5.2. サークル管理: 「サークル名簿」を編集する専用画面を提供する。サークルの下に所属・参加作者を紐付ける階層的管理機能を備える。
3.6. インポート＆エクスポート機能
3.6.1. 完全エクスポート: ユーザーが登録した全書誌データと、登録した表紙画像を一つのZIPファイルとして、いつでも書き出せる。データの可搬性を保証する、本アプリの思想を体現する機能。
3.6.2. 親切なインポート:
CSVファイルからの一括インポートに対応する。
ユーザーが迷わないよう**「インポート用のテンプレートCSVファイル」**をアプリ内からダウンロードできる。
インポート時に既存データと重複する作品が見つかった場合は、「上書き」「無視」をユーザーに確認する。
3.7. 統計ダッシュボード機能
「今年最も購入したサークル」「月別の購入金額グラフ」「タグの使用頻度」など、自身のコレクションに関する様々な統計データを自動で可視化し、新たな視点でコレクションを楽しむ機能を提供する。
3.8. ブラウザ拡張機能
3.8.1. 対応ブラウザ: Google Chrome (Manifest V3) を優先する。
3.8.2. 機能: DLsite, Fanza等の作品ページから書誌情報を自動取得する。
3.8.3. 段階的リリース:
フェーズ1: 取得した情報をJSON形式でクリップボードにコピーする。ユーザーはデスクトップアプリ側でペーストして登録する。
フェーズ2: デスクトップアプリとの直接連携（Native Messaging）を実現し、ワンクリックでの登録を目指す。
4. UI/UX (ユーザー体験) 要件
4.1. デザイン: クリーンで直感的、かつ所有する喜びを感じられるデザインを目指す。
4.2. UIテーマ変更機能:
ユーザーが設定画面からアプリの見た目を変更できる。
「ライト」「ダーク」「セピア」といったカラースキームを提供する。
将来的には「本棚モード」「データベースモード」のようなレイアウト自体の切り替えも検討する。
5. 非機能要件
5.1. パフォーマンス: 主要な操作はローカルデータベースに対して行われるため、オフラインでもストレスなく高速に動作する。
5.2. セキュリティ: ユーザーデータは第三者のサーバーを経由せず、ユーザー自身のGoogle Driveとローカルデバイス内にのみ存在する。通信はすべてHTTPSで暗号化される。
5.3. 可用性: アプリのデータ同期機能の可用性はGoogle Driveのサービスレベルに準拠する。
5.4. データの永続性と回復性: ユーザーが誤ってGoogle Drive上のファイルを削除した場合のリスクを低減するため、アプリ側での自動バックアップ機能（例：過去7日分のバージョンを保持）を将来的に検討する。
6. 開発・運用方針
6.1. オープンソース: GitHub等でソースコードを公開し、コミュニティからのあらゆる形の貢献（Issue報告、Pull Request等）を歓迎する。
6.2. コミュニティ拠点: 開発者やユーザー間の情報交換・議論の場として、将来的にDiscordサーバー等の設立を検討する。
6.3. 開発ロードマップ: 以下の段階的なフェーズで開発を進める。
フェーズ1 (MVP): Google Drive同期基盤、シンプルモードでの作品管理、インポート/エクスポート（テキストのみ）、ブラウザ拡張機能（クリップボード経由）。
フェーズ2 (愛用品への進化): 詳細モード、作者/タグページ、統計機能、ブラウザ拡張機能の強化、画像付きエクスポート。
フェーズ3 (コミュニティと共に): ユーザーフィードバックとコミュニティからの貢献を基にした継続的な改善。